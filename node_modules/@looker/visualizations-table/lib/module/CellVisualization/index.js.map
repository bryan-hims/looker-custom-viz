{"version":3,"file":"index.js","names":["React","styled","useTheme","deriveColorBlend","COLOR_BAND_COUNT","CellVisualization","props","colors","max","value","color","measure","cellVisWidth","colorBands","background","colorIndex","Math","round","SingleBar","div","attrs","width","style","flex","theme","sizes","small"],"sources":["../../../src/CellVisualization/index.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport styled, { useTheme } from 'styled-components'\nimport { deriveColorBlend } from '@looker/visualizations-adapters'\n\ntype CellVisualizationProps = {\n  min: number\n  max: number\n  value: number\n  color?: string\n}\n\nconst COLOR_BAND_COUNT = 10\n\nexport const CellVisualization = (props: CellVisualizationProps) => {\n  const { colors } = useTheme()\n  const { max, value, color = colors.measure } = props\n\n  if (max === 0) {\n    return null\n  }\n\n  const cellVisWidth = value / max // width in percent\n\n  const colorBands = deriveColorBlend(\n    color,\n    colors.background,\n    COLOR_BAND_COUNT\n  )\n\n  const colorIndex = Math.round((1 - cellVisWidth) * COLOR_BAND_COUNT)\n\n  return (\n    <SingleBar\n      color={colorBands[colorIndex]}\n      width={cellVisWidth}\n      data-testid=\"single-bar\"\n    />\n  )\n}\n\ntype SingleBarProps = { color?: string; width: number }\n\nconst SingleBar = styled.div.attrs<SingleBarProps>(({ width, color }) => ({\n  style: { flex: width, background: color },\n}))<SingleBarProps>`\n  height: ${({ theme }) => theme.sizes.small};\n`\n"],"mappings":";;;AAKA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,IAAIC,QAAQ,QAAQ,mBAAmB;AACpD,SAASC,gBAAgB,QAAQ,iCAAiC;AASlE,MAAMC,gBAAgB,GAAG,EAAE;AAE3B,OAAO,MAAMC,iBAAiB,GAAIC,KAA6B,IAAK;EAClE,MAAM;IAAEC;EAAO,CAAC,GAAGL,QAAQ,EAAE;EAC7B,MAAM;IAAEM,GAAG;IAAEC,KAAK;IAAEC,KAAK,GAAGH,MAAM,CAACI;EAAQ,CAAC,GAAGL,KAAK;EAEpD,IAAIE,GAAG,KAAK,CAAC,EAAE;IACb,OAAO,IAAI;EACb;EAEA,MAAMI,YAAY,GAAGH,KAAK,GAAGD,GAAG;;EAEhC,MAAMK,UAAU,GAAGV,gBAAgB,CACjCO,KAAK,EACLH,MAAM,CAACO,UAAU,EACjBV,gBAAgB,CACjB;EAED,MAAMW,UAAU,GAAGC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,GAAGL,YAAY,IAAIR,gBAAgB,CAAC;EAEpE,OACE,oBAAC,SAAS;IACR,KAAK,EAAES,UAAU,CAACE,UAAU,CAAE;IAC9B,KAAK,EAAEH,YAAa;IACpB,eAAY;EAAY,EACxB;AAEN,CAAC;AAID,MAAMM,SAAS,GAAGjB,MAAM,CAACkB,GAAG,CAACC,KAAK,CAAiB,CAAC;EAAEC,KAAK;EAAEX;AAAM,CAAC,MAAM;EACxEY,KAAK,EAAE;IAAEC,IAAI,EAAEF,KAAK;IAAEP,UAAU,EAAEJ;EAAM;AAC1C,CAAC,CAAC,CAAC,cAAiB;AACpB,YAAU,CAAmC;AAC7C,IADY,CAAC;EAAEc;AAAM,CAAC,KAAKA,KAAK,CAACC,KAAK,CAACC,KAAK,CAC3C"}