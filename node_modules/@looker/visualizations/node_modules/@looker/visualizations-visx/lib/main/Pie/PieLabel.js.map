{"version":3,"file":"PieLabel.js","names":["PieLabel","arc","outerRadius","labelContent","datumColor","theme","useTheme","startAngle","endAngle","averageAngle","pointRadial","connectorX","connectorY","connectorLength","getConnectorLength","labelX","labelY","ANCHOR_POSITION","strokeWidth","fontSizes","xsmall","top","right","bottom","left"],"sources":["../../../src/Pie/PieLabel.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { Annotation, Label, Connector } from '@visx/annotation'\nimport { pointRadial } from 'd3-shape'\nimport { useTheme } from 'styled-components'\nimport type { PieArcDatum } from '@visx/shape/lib/shapes/Pie'\nimport type { SDKRecord } from '@looker/visualizations-adapters'\nimport { getConnectorLength } from './getConnectorLength'\n\ntype PieLabelProps = {\n  arc: PieArcDatum<SDKRecord>\n  outerRadius: number\n  labelContent: string\n  datumColor: string\n}\n\nexport const PieLabel = ({\n  arc,\n  outerRadius,\n  labelContent,\n  datumColor,\n}: PieLabelProps) => {\n  const theme = useTheme()\n  const { startAngle, endAngle } = arc\n  const averageAngle = (startAngle + endAngle) / 2\n\n  const [connectorX, connectorY] = pointRadial(averageAngle, outerRadius)\n\n  const connectorLength = getConnectorLength(averageAngle, outerRadius)\n  const [labelX, labelY] = pointRadial(averageAngle, connectorLength)\n\n  const ANCHOR_POSITION = connectorX > 0 ? 'start' : 'end'\n\n  return (\n    <Annotation x={connectorX} y={connectorY} dx={labelX} dy={labelY}>\n      <Connector\n        stroke={datumColor}\n        pathProps={{ strokeWidth: 2 }}\n        type=\"line\"\n      />\n      <Label\n        titleFontSize={theme.fontSizes.xsmall}\n        backgroundFill=\"transparent\"\n        backgroundPadding={{ top: 5, right: 5, bottom: 5, left: 5 }}\n        showAnchorLine={false}\n        horizontalAnchor={ANCHOR_POSITION}\n        verticalAnchor=\"middle\"\n        title={labelContent}\n      />\n    </Annotation>\n  )\n}\n"],"mappings":";;;;;;;;AAKA;AACA;AACA;AACA;AAGA;;AASO,IAAMA,QAAQ,GAAG,SAAXA,QAAQ,OAKA;EAAA,IAJnBC,GAAG,QAAHA,GAAG;IACHC,WAAW,QAAXA,WAAW;IACXC,YAAY,QAAZA,YAAY;IACZC,UAAU,QAAVA,UAAU;EAEV,IAAMC,KAAK,GAAG,IAAAC,0BAAQ,GAAE;EACxB,IAAQC,UAAU,GAAeN,GAAG,CAA5BM,UAAU;IAAEC,QAAQ,GAAKP,GAAG,CAAhBO,QAAQ;EAC5B,IAAMC,YAAY,GAAG,CAACF,UAAU,GAAGC,QAAQ,IAAI,CAAC;EAEhD,mBAAiC,IAAAE,oBAAW,EAACD,YAAY,EAAEP,WAAW,CAAC;IAAA;IAAhES,UAAU;IAAEC,UAAU;EAE7B,IAAMC,eAAe,GAAG,IAAAC,sCAAkB,EAACL,YAAY,EAAEP,WAAW,CAAC;EACrE,oBAAyB,IAAAQ,oBAAW,EAACD,YAAY,EAAEI,eAAe,CAAC;IAAA;IAA5DE,MAAM;IAAEC,MAAM;EAErB,IAAMC,eAAe,GAAGN,UAAU,GAAG,CAAC,GAAG,OAAO,GAAG,KAAK;EAExD,OACE,gCAAC,sBAAU;IAAC,CAAC,EAAEA,UAAW;IAAC,CAAC,EAAEC,UAAW;IAAC,EAAE,EAAEG,MAAO;IAAC,EAAE,EAAEC;EAAO,GAC/D,gCAAC,qBAAS;IACR,MAAM,EAAEZ,UAAW;IACnB,SAAS,EAAE;MAAEc,WAAW,EAAE;IAAE,CAAE;IAC9B,IAAI,EAAC;EAAM,EACX,EACF,gCAAC,iBAAK;IACJ,aAAa,EAAEb,KAAK,CAACc,SAAS,CAACC,MAAO;IACtC,cAAc,EAAC,aAAa;IAC5B,iBAAiB,EAAE;MAAEC,GAAG,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAE,CAAE;IAC5D,cAAc,EAAE,KAAM;IACtB,gBAAgB,EAAEP,eAAgB;IAClC,cAAc,EAAC,QAAQ;IACvB,KAAK,EAAEd;EAAa,EACpB,CACS;AAEjB,CAAC;AAAA"}