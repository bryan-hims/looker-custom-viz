{"version":3,"file":"Tick.js","names":["MAX_TICK_LABEL_LENGTH","Tick","formattedValue","fields","valueFormat","tickProps","isNumericTick","isNumeric","label","formatDateLabel","dateString","renderedLabel","length","slice","trim","numeral","format"],"sources":["../../../src/Axis/Tick.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { isNumeric } from '@looker/visualizations-adapters'\nimport type { TickRendererProps } from '@visx/axis'\nimport { Text } from '@visx/text'\nimport numeral from 'numeral'\nimport React from 'react'\nimport { formatDateLabel } from '../utils'\nimport type { XAxisProps } from './types'\n\n/**\n * All tick labels longer than this will be truncated\n */\nexport const MAX_TICK_LABEL_LENGTH = 20\n\nexport type TickProps = Pick<XAxisProps, 'fields' | 'valueFormat'> &\n  TickRendererProps\n\n/**\n * Tick component typically used in the tickComponent prop of\n * visx <Axis> components\n */\nexport const Tick = ({\n  formattedValue,\n  fields,\n  valueFormat,\n  ...tickProps\n}: TickProps) => {\n  /**\n   * numeral() can unintentionally convert a tick label into\n   * a number even when that label should have remained a string\n   * (i.e. in the case of concatenated dimension values). Need\n   * an additional NaN check to verify if the tick label is actually\n   * numeric.\n   */\n  const isNumericTick = isNumeric(formattedValue)\n\n  const label = formatDateLabel({\n    dateString: formattedValue || '',\n    fields,\n  })\n  const renderedLabel =\n    label.length > MAX_TICK_LABEL_LENGTH\n      ? `${label.slice(0, MAX_TICK_LABEL_LENGTH).trim()}\\u2026`\n      : label\n\n  return (\n    <Text {...tickProps}>\n      {valueFormat && isNumericTick\n        ? numeral(formattedValue).format(valueFormat)\n        : renderedLabel}\n    </Text>\n  )\n}\n"],"mappings":";;;;;;;;AAKA;AAEA;AACA;AACA;AACA;AAA0C;AAMnC,IAAMA,qBAAqB,GAAG,EAAE;AAAA;AAShC,IAAMC,IAAI,GAAG,SAAPA,IAAI,OAKA;EAAA,IAJfC,cAAc,QAAdA,cAAc;IACdC,MAAM,QAANA,MAAM;IACNC,WAAW,QAAXA,WAAW;IACRC,SAAS;EASZ,IAAMC,aAAa,GAAG,IAAAC,iCAAS,EAACL,cAAc,CAAC;EAE/C,IAAMM,KAAK,GAAG,IAAAC,sBAAe,EAAC;IAC5BC,UAAU,EAAER,cAAc,IAAI,EAAE;IAChCC,MAAM,EAANA;EACF,CAAC,CAAC;EACF,IAAMQ,aAAa,GACjBH,KAAK,CAACI,MAAM,GAAGZ,qBAAqB,aAC7BQ,KAAK,CAACK,KAAK,CAAC,CAAC,EAAEb,qBAAqB,CAAC,CAACc,IAAI,EAAE,cAC/CN,KAAK;EAEX,OACE,gCAAC,UAAI,EAAKH,SAAS,EAChBD,WAAW,IAAIE,aAAa,GACzB,IAAAS,mBAAO,EAACb,cAAc,CAAC,CAACc,MAAM,CAACZ,WAAW,CAAC,GAC3CO,aAAa,CACZ;AAEX,CAAC;AAAA"}