{"version":3,"file":"formatDateLabel.js","names":["formatDateLabel","dateString","fields","dateObj","parseISO","isDateQuery","isValid","type","dimensions","format"],"sources":["../../../src/utils/formatDateLabel.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Fields } from '@looker/visualizations-adapters'\nimport { isValid } from 'date-fns'\nimport format from 'date-fns/format'\nimport parseISO from 'date-fns/parseISO'\nimport { isDateQuery } from './isDateQuery'\n\ntype FormatDateLabelProps = {\n  dateString: string\n  fields: Fields\n  timespan?: number\n}\n\n/**\n * Converts a Looker date string into a presentable date label based on\n * the date dimension's type and the data's total timespan.\n */\nexport const formatDateLabel = ({\n  dateString,\n  fields,\n}: FormatDateLabelProps) => {\n  const dateObj = parseISO(dateString)\n\n  if (isDateQuery(fields) && isValid(dateObj)) {\n    const { type } = fields.dimensions[0]\n\n    if (type === 'date_year') {\n      return format(dateObj, 'yyyy')\n    } else if (type === 'date_month') {\n      return format(dateObj, 'MMMM \\u2018yy')\n    } else if (type === 'date_date' || type === 'date_week') {\n      return format(dateObj, 'LLL d')\n    }\n  }\n\n  // fallback for unsupported date types\n  return dateString\n}\n"],"mappings":";;;;;;;AAMA;AACA;AACA;AACA;;AAYO,IAAMA,eAAe,GAAG,SAAlBA,eAAe,OAGA;EAAA,IAF1BC,UAAU,QAAVA,UAAU;IACVC,MAAM,QAANA,MAAM;EAEN,IAAMC,OAAO,GAAG,IAAAC,oBAAQ,EAACH,UAAU,CAAC;EAEpC,IAAI,IAAAI,wBAAW,EAACH,MAAM,CAAC,IAAI,IAAAI,gBAAO,EAACH,OAAO,CAAC,EAAE;IAC3C,IAAQI,IAAI,GAAKL,MAAM,CAACM,UAAU,CAAC,CAAC,CAAC,CAA7BD,IAAI;IAEZ,IAAIA,IAAI,KAAK,WAAW,EAAE;MACxB,OAAO,IAAAE,kBAAM,EAACN,OAAO,EAAE,MAAM,CAAC;IAChC,CAAC,MAAM,IAAII,IAAI,KAAK,YAAY,EAAE;MAChC,OAAO,IAAAE,kBAAM,EAACN,OAAO,EAAE,eAAe,CAAC;IACzC,CAAC,MAAM,IAAII,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,WAAW,EAAE;MACvD,OAAO,IAAAE,kBAAM,EAACN,OAAO,EAAE,OAAO,CAAC;IACjC;EACF;;EAGA,OAAOF,UAAU;AACnB,CAAC;AAAA"}