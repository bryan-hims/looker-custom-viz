{"version":3,"file":"useLabelWidth.js","names":["MIN_LABEL_SPACE","useLabelWidth","measureTotal","keyValData","legend","type","legendType","theme","useTheme","longestLabel","pickLongestLabel","Object","entries","map","key","val","getLabelContent","useMeasuredText","fontSize","fontSizes","medium","xsmall","fontFamily","fonts","body","labelWidth","width","Math","max"],"sources":["../../../src/Pie/useLabelWidth.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport {\n  pickLongestLabel,\n  useMeasuredText,\n} from '@looker/visualizations-adapters'\nimport type { CPie } from '@looker/visualizations-adapters'\nimport { useTheme } from 'styled-components'\nimport { getLabelContent } from './getLabelContent'\n\nexport const MIN_LABEL_SPACE = 90\n\n/**\n * Utility function measures the actual dom space required for the longest label in\n * a pie chart data set.\n *\n * @param measureTotal the total value represented by the pie chart data\n * @param keyValData the data used to render a pie chart\n * @param legend the legend config\n * @returns the width in pixels of the longest label\n */\nexport const useLabelWidth = (\n  measureTotal: number,\n  keyValData: Record<string, number>,\n  legend: CPie['legend']\n) => {\n  const { type: legendType = 'legend' } = legend || {}\n  const theme = useTheme()\n\n  const longestLabel = pickLongestLabel(\n    Object.entries(keyValData).map(([key, val]) => {\n      return getLabelContent(measureTotal, { [key]: val }, legend)\n    })\n  )\n\n  const { width: labelWidth } = useMeasuredText(longestLabel, {\n    fontSize:\n      legendType === 'legend' ? theme.fontSizes.medium : theme.fontSizes.xsmall,\n    fontFamily: theme.fonts.body,\n  })\n\n  return Math.max(labelWidth + 20, MIN_LABEL_SPACE)\n}\n"],"mappings":";;;;;;;;;AAKA;AAKA;AACA;;AAEO,IAAMA,eAAe,GAAG,EAAE;;AAAA;AAW1B,IAAMC,aAAa,GAAG,SAAhBA,aAAa,CACxBC,YAAoB,EACpBC,UAAkC,EAClCC,MAAsB,EACnB;EACH,WAAwCA,MAAM,IAAI,CAAC,CAAC;IAAA,iBAA5CC,IAAI;IAAEC,UAAU,0BAAG,QAAQ;EACnC,IAAMC,KAAK,GAAG,IAAAC,0BAAQ,GAAE;EAExB,IAAMC,YAAY,GAAG,IAAAC,wCAAgB,EACnCC,MAAM,CAACC,OAAO,CAACT,UAAU,CAAC,CAACU,GAAG,CAAC,iBAAgB;IAAA;MAAdC,GAAG;MAAEC,GAAG;IACvC,OAAO,IAAAC,iCAAe,EAACd,YAAY,uCAAKY,GAAG,EAAGC,GAAG,GAAIX,MAAM,CAAC;EAC9D,CAAC,CAAC,CACH;EAED,uBAA8B,IAAAa,uCAAe,EAACR,YAAY,EAAE;MAC1DS,QAAQ,EACNZ,UAAU,KAAK,QAAQ,GAAGC,KAAK,CAACY,SAAS,CAACC,MAAM,GAAGb,KAAK,CAACY,SAAS,CAACE,MAAM;MAC3EC,UAAU,EAAEf,KAAK,CAACgB,KAAK,CAACC;IAC1B,CAAC,CAAC;IAJaC,UAAU,oBAAjBC,KAAK;EAMb,OAAOC,IAAI,CAACC,GAAG,CAACH,UAAU,GAAG,EAAE,EAAEzB,eAAe,CAAC;AACnD,CAAC;AAAA"}