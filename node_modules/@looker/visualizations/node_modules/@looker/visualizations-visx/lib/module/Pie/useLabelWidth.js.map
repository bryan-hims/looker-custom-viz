{"version":3,"file":"useLabelWidth.js","names":["pickLongestLabel","useMeasuredText","useTheme","getLabelContent","MIN_LABEL_SPACE","useLabelWidth","measureTotal","keyValData","legend","type","legendType","theme","longestLabel","Object","entries","map","key","val","width","labelWidth","fontSize","fontSizes","medium","xsmall","fontFamily","fonts","body","Math","max"],"sources":["../../../src/Pie/useLabelWidth.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport {\n  pickLongestLabel,\n  useMeasuredText,\n} from '@looker/visualizations-adapters'\nimport type { CPie } from '@looker/visualizations-adapters'\nimport { useTheme } from 'styled-components'\nimport { getLabelContent } from './getLabelContent'\n\nexport const MIN_LABEL_SPACE = 90\n\n/**\n * Utility function measures the actual dom space required for the longest label in\n * a pie chart data set.\n *\n * @param measureTotal the total value represented by the pie chart data\n * @param keyValData the data used to render a pie chart\n * @param legend the legend config\n * @returns the width in pixels of the longest label\n */\nexport const useLabelWidth = (\n  measureTotal: number,\n  keyValData: Record<string, number>,\n  legend: CPie['legend']\n) => {\n  const { type: legendType = 'legend' } = legend || {}\n  const theme = useTheme()\n\n  const longestLabel = pickLongestLabel(\n    Object.entries(keyValData).map(([key, val]) => {\n      return getLabelContent(measureTotal, { [key]: val }, legend)\n    })\n  )\n\n  const { width: labelWidth } = useMeasuredText(longestLabel, {\n    fontSize:\n      legendType === 'legend' ? theme.fontSizes.medium : theme.fontSizes.xsmall,\n    fontFamily: theme.fonts.body,\n  })\n\n  return Math.max(labelWidth + 20, MIN_LABEL_SPACE)\n}\n"],"mappings":";;AAKA,SACEA,gBAAgB,EAChBC,eAAe,QACV,iCAAiC;AAExC,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C,SAASC,eAAe,QAAQ,mBAAmB;AAEnD,OAAO,MAAMC,eAAe,GAAG,EAAE;;AAWjC,OAAO,MAAMC,aAAa,GAAG,CAC3BC,YAAoB,EACpBC,UAAkC,EAClCC,MAAsB,KACnB;EACH,MAAM;IAAEC,IAAI,EAAEC,UAAU,GAAG;EAAS,CAAC,GAAGF,MAAM,IAAI,CAAC,CAAC;EACpD,MAAMG,KAAK,GAAGT,QAAQ,EAAE;EAExB,MAAMU,YAAY,GAAGZ,gBAAgB,CACnCa,MAAM,CAACC,OAAO,CAACP,UAAU,CAAC,CAACQ,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,KAAK;IAC7C,OAAOd,eAAe,CAACG,YAAY,EAAE;MAAE,CAACU,GAAG,GAAGC;IAAI,CAAC,EAAET,MAAM,CAAC;EAC9D,CAAC,CAAC,CACH;EAED,MAAM;IAAEU,KAAK,EAAEC;EAAW,CAAC,GAAGlB,eAAe,CAACW,YAAY,EAAE;IAC1DQ,QAAQ,EACNV,UAAU,KAAK,QAAQ,GAAGC,KAAK,CAACU,SAAS,CAACC,MAAM,GAAGX,KAAK,CAACU,SAAS,CAACE,MAAM;IAC3EC,UAAU,EAAEb,KAAK,CAACc,KAAK,CAACC;EAC1B,CAAC,CAAC;EAEF,OAAOC,IAAI,CAACC,GAAG,CAACT,UAAU,GAAG,EAAE,EAAEf,eAAe,CAAC;AACnD,CAAC"}