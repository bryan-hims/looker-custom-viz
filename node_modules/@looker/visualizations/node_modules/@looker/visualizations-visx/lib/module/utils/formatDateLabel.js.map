{"version":3,"file":"formatDateLabel.js","names":["isValid","format","parseISO","isDateQuery","formatDateLabel","dateString","fields","dateObj","type","dimensions"],"sources":["../../../src/utils/formatDateLabel.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Fields } from '@looker/visualizations-adapters'\nimport { isValid } from 'date-fns'\nimport format from 'date-fns/format'\nimport parseISO from 'date-fns/parseISO'\nimport { isDateQuery } from './isDateQuery'\n\ntype FormatDateLabelProps = {\n  dateString: string\n  fields: Fields\n  timespan?: number\n}\n\n/**\n * Converts a Looker date string into a presentable date label based on\n * the date dimension's type and the data's total timespan.\n */\nexport const formatDateLabel = ({\n  dateString,\n  fields,\n}: FormatDateLabelProps) => {\n  const dateObj = parseISO(dateString)\n\n  if (isDateQuery(fields) && isValid(dateObj)) {\n    const { type } = fields.dimensions[0]\n\n    if (type === 'date_year') {\n      return format(dateObj, 'yyyy')\n    } else if (type === 'date_month') {\n      return format(dateObj, 'MMMM \\u2018yy')\n    } else if (type === 'date_date' || type === 'date_week') {\n      return format(dateObj, 'LLL d')\n    }\n  }\n\n  // fallback for unsupported date types\n  return dateString\n}\n"],"mappings":";;AAMA,SAASA,OAAO,QAAQ,UAAU;AAClC,OAAOC,MAAM,MAAM,iBAAiB;AACpC,OAAOC,QAAQ,MAAM,mBAAmB;AACxC,SAASC,WAAW,QAAQ,eAAe;AAY3C,OAAO,MAAMC,eAAe,GAAG,CAAC;EAC9BC,UAAU;EACVC;AACoB,CAAC,KAAK;EAC1B,MAAMC,OAAO,GAAGL,QAAQ,CAACG,UAAU,CAAC;EAEpC,IAAIF,WAAW,CAACG,MAAM,CAAC,IAAIN,OAAO,CAACO,OAAO,CAAC,EAAE;IAC3C,MAAM;MAAEC;IAAK,CAAC,GAAGF,MAAM,CAACG,UAAU,CAAC,CAAC,CAAC;IAErC,IAAID,IAAI,KAAK,WAAW,EAAE;MACxB,OAAOP,MAAM,CAACM,OAAO,EAAE,MAAM,CAAC;IAChC,CAAC,MAAM,IAAIC,IAAI,KAAK,YAAY,EAAE;MAChC,OAAOP,MAAM,CAACM,OAAO,EAAE,eAAe,CAAC;IACzC,CAAC,MAAM,IAAIC,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,WAAW,EAAE;MACvD,OAAOP,MAAM,CAACM,OAAO,EAAE,OAAO,CAAC;IACjC;EACF;;EAGA,OAAOF,UAAU;AACnB,CAAC"}