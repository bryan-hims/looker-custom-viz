{"version":3,"file":"PieLabel.js","names":["React","Annotation","Label","Connector","pointRadial","useTheme","getConnectorLength","PieLabel","arc","outerRadius","labelContent","datumColor","theme","startAngle","endAngle","averageAngle","connectorX","connectorY","connectorLength","labelX","labelY","ANCHOR_POSITION","strokeWidth","fontSizes","xsmall","top","right","bottom","left"],"sources":["../../../src/Pie/PieLabel.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { Annotation, Label, Connector } from '@visx/annotation'\nimport { pointRadial } from 'd3-shape'\nimport { useTheme } from 'styled-components'\nimport type { PieArcDatum } from '@visx/shape/lib/shapes/Pie'\nimport type { SDKRecord } from '@looker/visualizations-adapters'\nimport { getConnectorLength } from './getConnectorLength'\n\ntype PieLabelProps = {\n  arc: PieArcDatum<SDKRecord>\n  outerRadius: number\n  labelContent: string\n  datumColor: string\n}\n\nexport const PieLabel = ({\n  arc,\n  outerRadius,\n  labelContent,\n  datumColor,\n}: PieLabelProps) => {\n  const theme = useTheme()\n  const { startAngle, endAngle } = arc\n  const averageAngle = (startAngle + endAngle) / 2\n\n  const [connectorX, connectorY] = pointRadial(averageAngle, outerRadius)\n\n  const connectorLength = getConnectorLength(averageAngle, outerRadius)\n  const [labelX, labelY] = pointRadial(averageAngle, connectorLength)\n\n  const ANCHOR_POSITION = connectorX > 0 ? 'start' : 'end'\n\n  return (\n    <Annotation x={connectorX} y={connectorY} dx={labelX} dy={labelY}>\n      <Connector\n        stroke={datumColor}\n        pathProps={{ strokeWidth: 2 }}\n        type=\"line\"\n      />\n      <Label\n        titleFontSize={theme.fontSizes.xsmall}\n        backgroundFill=\"transparent\"\n        backgroundPadding={{ top: 5, right: 5, bottom: 5, left: 5 }}\n        showAnchorLine={false}\n        horizontalAnchor={ANCHOR_POSITION}\n        verticalAnchor=\"middle\"\n        title={labelContent}\n      />\n    </Annotation>\n  )\n}\n"],"mappings":";;AAKA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,EAAEC,KAAK,EAAEC,SAAS,QAAQ,kBAAkB;AAC/D,SAASC,WAAW,QAAQ,UAAU;AACtC,SAASC,QAAQ,QAAQ,mBAAmB;AAG5C,SAASC,kBAAkB,QAAQ,sBAAsB;AASzD,OAAO,MAAMC,QAAQ,GAAG,CAAC;EACvBC,GAAG;EACHC,WAAW;EACXC,YAAY;EACZC;AACa,CAAC,KAAK;EACnB,MAAMC,KAAK,GAAGP,QAAQ,EAAE;EACxB,MAAM;IAAEQ,UAAU;IAAEC;EAAS,CAAC,GAAGN,GAAG;EACpC,MAAMO,YAAY,GAAG,CAACF,UAAU,GAAGC,QAAQ,IAAI,CAAC;EAEhD,MAAM,CAACE,UAAU,EAAEC,UAAU,CAAC,GAAGb,WAAW,CAACW,YAAY,EAAEN,WAAW,CAAC;EAEvE,MAAMS,eAAe,GAAGZ,kBAAkB,CAACS,YAAY,EAAEN,WAAW,CAAC;EACrE,MAAM,CAACU,MAAM,EAAEC,MAAM,CAAC,GAAGhB,WAAW,CAACW,YAAY,EAAEG,eAAe,CAAC;EAEnE,MAAMG,eAAe,GAAGL,UAAU,GAAG,CAAC,GAAG,OAAO,GAAG,KAAK;EAExD,OACE,oBAAC,UAAU;IAAC,CAAC,EAAEA,UAAW;IAAC,CAAC,EAAEC,UAAW;IAAC,EAAE,EAAEE,MAAO;IAAC,EAAE,EAAEC;EAAO,GAC/D,oBAAC,SAAS;IACR,MAAM,EAAET,UAAW;IACnB,SAAS,EAAE;MAAEW,WAAW,EAAE;IAAE,CAAE;IAC9B,IAAI,EAAC;EAAM,EACX,EACF,oBAAC,KAAK;IACJ,aAAa,EAAEV,KAAK,CAACW,SAAS,CAACC,MAAO;IACtC,cAAc,EAAC,aAAa;IAC5B,iBAAiB,EAAE;MAAEC,GAAG,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAE,CAAE;IAC5D,cAAc,EAAE,KAAM;IACtB,gBAAgB,EAAEP,eAAgB;IAClC,cAAc,EAAC,QAAQ;IACvB,KAAK,EAAEX;EAAa,EACpB,CACS;AAEjB,CAAC"}